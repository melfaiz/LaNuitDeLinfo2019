<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Javascript game</title>
    <script src="canvas.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <meta
      name="viewport"
      content="width=device-width,
    initial-scale=0.85, maximum-scale=0.85, user-scalable=0"
    />
  </head>
  <body>
    <canvas id="myCanvas" width="400" height="600"></canvas>

    <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js"></script>
    <script>
      // Initialize Firebase
      var firebaseConfig = {
        apiKey: "AIzaSyCgtYwGRAvH8bH71nbPtXVeRqHlFm7mPfg",
        authDomain: "birdy-404.firebaseapp.com",
        databaseURL: "https://birdy-404.firebaseio.com",
        projectId: "birdy-404",
        storageBucket: "birdy-404.appspot.com",
        messagingSenderId: "1061185920585",
        appId: "1:1061185920585:web:17cc706332a079e2982998"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);

      var bigOne = document.getElementById("bigOne");
      var key = "ajfekfcs";
      function addScore(score) {
        // firebase
        //   .auth()
        //   .createUserWithEmailAndPassword("khoryos@gmail.com", "123456789")
        //   .catch(function(error) {
        //     // Handle Errors here.
        //     var errorCode = error.code;
        //     var errorMessage = error.message;
        //     console.log(errorMessage);
        //   });
        var dbRef = firebase
          .database()
          .ref()
          .child("users/" + key)
          .set({ score: score });
      }
    </script>
    <script>
      var canvas = document.getElementById("myCanvas");
      var ctx = canvas.getContext("2d");
      var W = canvas.width;
      var H = canvas.height;
      var spikex = 10;
      var spr = Math.sqrt(2 * (spikex * spikex));
      var img = new Image();
      var mouseClicked = false;
      var gameon = false;
      var faces = [
        "img/bird1.png",
        "img/bird11.png",
        "img/bird2.png",
        "img/bird22.png"
      ];
      preloadImages(faces);
      var spikesmatrix = [generate(1), generate(1)];
      var score = 0;
      var max = 0;
      var img = new Image();
      img.src = "img/bird1.png";
      hit = new sound("sounds/bounce.mp3");
      losts = new sound("sounds/lost.mp3");
      spin = new sound("sounds/spin.mp3");

      document.addEventListener("click", mousedown, false);

      document.addEventListener("touchend", touch, false);

      function touch() {
        spin.play();
      }
      function lostf() {
        losts.play();
      }

      document.body.onkeyup = function(e) {
        if (e.keyCode == 32) {
          mousedown();
        }
      };

      var requestAnimationFrame =
        window.requestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.msRequestAnimationFrame;

      var bird = {
        x: W / 2 - 50,
        y: H / 2 - 10,
        vx: 3.5,
        vy: 5,
        jumping: false,
        jumpingv: 10,
        l: 100,
        h: 65,

        draw: function() {
          ctx.drawImage(img, this.x, this.y, this.l, this.h);
        },
        move: function() {
          this.y += this.vy;
          this.x += this.vx;
        }
      };

      animate();
    </script>
  </body>
</html>
